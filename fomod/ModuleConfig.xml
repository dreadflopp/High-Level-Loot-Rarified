<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://qconsulting.ca/fo3/ModConfig5.0.xsd">
	<moduleName>High-Level Loot Rarified</moduleName>
	<installSteps order="Explicit">

		<!-- Welcome -->
		<installStep name="Welcome">
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectExactlyOne">
					<plugins order="Explicit">
						<plugin name="Welcome">
							<description>
								<![CDATA[Welcome to the High-Level Loot Rarified installer.]]>
							</description>
							<conditionFlags>
								<flag name="core">Off</flag>
								<flag name="aaaddon">Off</flag>
								<flag name="haaddon">Off</flag>
								<flag name="aa">Off</flag>
								<flag name="ha">Off</flag>
								<flag name="obis">Off</flag>
								<flag name="am">Off</flag>
								<flag name="da">Off</flag>
								<flag name="obis">Off</flag>
							</conditionFlags>
							<files>
								<file source="core\High-level Loot Rarified.esp" destination="High-level Loot Rarified.esp" priority="0" />
							</files>							
							<typeDescriptor>
								<type name="Recommended"/>
							</typeDescriptor>
						</plugin>
					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>
		
		<!-- Core -->
		<installStep name="High-Level Loot Rarified Core">
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAny">
					<plugins order="Explicit">
						<plugin name="High-Level Loot Rarified Core">
							<description>
								<![CDATA[This is the core of the mod that rarifies the vanilla game.]]>
							</description>
							<files>
								<file source="core\High-level Loot Rarified.esp" destination="High-level Loot Rarified.esp" priority="0" />
							</files>							
							<typeDescriptor>
								<type name="Recommended"/>
							</typeDescriptor>
						</plugin>
					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		<!--Addons -->
		<installStep name="High-Level Loot Rarified Addons">
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAny">
					<plugins order="Explicit">
						<plugin name="High-Level Loot Rarified - Animated Armoury addon">
							<description>
								<![CDATA[This addon rarifies Animated Armoury.]]>
							</description>
							<conditionFlags>
								<flag name="aaaddon">On</flag>
							</conditionFlags>
							<files>
								<file source="addons\High-level Loot Rarified - Animated Armoury Addon.esp" destination="High-level Loot Rarified - Animated Armoury Addon.esp" priority="0" />
							</files>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="NewArmoury.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>
						<plugin name="High-Level Loot Rarified - Heavy Armoury addon">
							<description>
								<![CDATA[This addon rarifies Heavy Armory.]]>
							</description>
							<conditionFlags>
								<flag name="haaddon">On</flag>
							</conditionFlags>
							<files>
								<file source="addons\High-level Loot Rarified - Heavy Armory Addon.esp" destination="High-level Loot Rarified - Heavy Armory Addon.esp" priority="0" />
							</files>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="PrvtI_HeavyArmory.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>
						<plugin name="High-Level Loot Rarified - OBIS addon">
							<description>
								<![CDATA[This addon rarifies OBIS.]]>
							</description>
							<files>
								<file source="addons\High-level Loot Rarified - OBIS Addon.esp" destination="High-level Loot Rarified - OBIS Addon.esp" priority="0" />
							</files>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="OBIS SE.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>
					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		<!-- Tweaks -->
		<installStep name="High-Level Loot Rarified Tweaks">
			<visible>
				<dependencies operator="And">
					<flagDependency flag="aaaddon" value="On"/>
					<flagDependency flag="haaddon" value="On"/>
				</dependencies>
			</visible>
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAny">
					<plugins order="Explicit">
						<plugin name="Animated Armour and Heavy Armory tweaks">
							<description>
								<![CDATA[This is a consistency tweak for Animated Armoury and Heavy Armory. It is created using a scipt by Wheredidit run: https://www.nexusmods.com/skyrimspecialedition/mods/19547

The tweak includes the following changes:

- Rebalancing of Animated Armoury and Heavy Armoury against both each other as well as against vanilla Skyrim. 
- The Halbards from Heavy Armory, which are shorter than Halbards from Animated Armory, will be renamed to Pole Axes (which is a real thing). 
- The new animations from Animated Armoury will be applied to the new weapons from Heavy Armory]]>								
							</description>
							<conditionFlags>
								<flag name="tweaks">On</flag>
							</conditionFlags>
							<files>
								<file source="tweaks\Animated Armory - Heavy Armory tweaks.esp" destination="Animated Armory - Heavy Armory tweaks.esp" priority="0" />
							</files>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Recommended"/>
								</dependencyType>
							</typeDescriptor>
						</plugin>
					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		<!-- Patches -->
		<installStep name="High-Level Loot Rarified Patches">
			<optionalFileGroups order="Explicit">
				<group name="Choose the mods to install patches for" type="SelectAny">
					<plugins order="Explicit">
						<plugin name="Ars Metallica">
							<description>
								<![CDATA[This patch will patch Ars Metallicas leveled list against the other selected mods. It will also add breakdown recipes for Animated Armoury and Heavy Armory if these addons are selected.]]>
							</description>
							<conditionFlags>
								<flag name="am">On</flag>
							</conditionFlags>						
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="Ars Metallica.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>
						<plugin name="Dawnguard Arsenal">
							<description>
								<![CDATA[Patches Dawnguard Arsenal's leveled list against the other selected mods.]]>
							</description>
							<conditionFlags>
								<flag name="da">On</flag>
							</conditionFlags>						
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="DawnguardArsenal.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>
						<plugin name="High-Level Loot Rarified - Animated Armoury addon">
							<description>
								<![CDATA[Patches Animated Armoury Addon's leveled list against the other selected mods.]]>
							</description>
							<conditionFlags>
								<flag name="aa">On</flag>
							</conditionFlags>						
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<flagDependency flag="aaaddon" value="On"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>
						<plugin name="High-Level Loot Rarified - Heavy Armoury addon">
							<description>
								<![CDATA[Patches Heavy Armoury Addon's leveled list against the other selected mods.]]>
							</description>
							<conditionFlags>
								<flag name="ha">On</flag>
							</conditionFlags>					
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<flagDependency flag="haaddon" value="On"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>
					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>
	</installSteps>
	
	<!-- ****************************** -->
	<!-- ****** Install patterns ****** -->
	<!-- ****************************** -->
	<conditionalFileInstalls>
		<patterns>
			<!-- Main + Addons -->
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="ha" value="On"/>
				</dependencies>
				<files>
					<file source="patches\HLLR - Animated Armoury and Heavy Armoury Patch.esp" destination="HLLR - Animated Armoury and Heavy Armoury Patch.esp" priority="0" />
				</files>
			</pattern>	

			<!-- Ars Metallica -->
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="ha" value="Off"/>
					<flagDependency flag="am" value="On"/>
				</dependencies>
				<files>
					<file source="patches\HLLR - Animated Armory - Ars Metallica Patch.esp" destination="HLLR - Animated Armory - Ars Metallica Patch.esp" priority="0" />
				</files>
			</pattern>	
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="Off"/>
					<flagDependency flag="ha" value="On"/>
					<flagDependency flag="am" value="On"/>
				</dependencies>
				<files>
					<file source="patches\HLLR - Heavy Armory - Ars Metallica Patch.esp" destination="HLLR - Heavy Armory - Ars Metallica Patch.esp" priority="0" />
				</files>
			</pattern>	
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="ha" value="On"/>
					<flagDependency flag="am" value="On"/>
				</dependencies>
				<files>
					<file source="patches\HLLR - Animated Armory and Heavy Armory - Ars Metallica Patch.esp" destination="HLLR - Animated Armory and Heavy Armory - Ars Metallica Patch.esp" priority="0" />
				</files>
			</pattern>	

			<!-- Dawnguard Arsenal -->
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="ha" value="Off"/>
					<flagDependency flag="da" value="On"/>
				</dependencies>
				<files>
					<file source="patches\HLLR - Animated Armoury and Dawnguard Arsenal Patch.esp" destination="HLLR - Animated Armoury and Dawnguard Arsenal Patch.esp" priority="0" />
				</files>
			</pattern>	
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="Off"/>
					<flagDependency flag="ha" value="On"/>
					<flagDependency flag="da" value="On"/>
				</dependencies>
				<files>
					<file source="patches\HLLR - Heavy Armoury and Dawnguard Arsenal Patch.esp" destination="HLLR - Heavy Armoury and Dawnguard Arsenal Patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="ha" value="On"/>
					<flagDependency flag="da" value="On"/>
				</dependencies>
				<files>
					<file source="patches\HLLR - Animated Armoury Heavy Armory and Dawnguard Arsenal Patch.esp" destination="HLLR - Animated Armoury Heavy Armory and Dawnguard Arsenal Patch.esp" priority="0" />
				</files>
			</pattern>
		</patterns>
	</conditionalFileInstalls>
</config>
